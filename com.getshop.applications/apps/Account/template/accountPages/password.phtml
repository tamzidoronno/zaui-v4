<?php
namespace ns_6c245631_effb_4fe2_abf7_f44c57cb6c5b;

if(isset($_POST['data']) && isset($_POST['data']['set_new_password'])) {
    $failed = false;
    if(strlen(trim($_POST['data']['old'])) == 0) {
        echo "* Old password has to be set<br>";
        $failed = true;
    }
    if(strlen(trim($_POST['data']['new'])) == 0) {
        echo "* new password has to be set<br>";
        $failed = true;
    }
    if($_POST['data']['new'] != $_POST['data']['new_repeat']) {
        echo "* password and repeat password does not match.<br>";
        $failed = true;
    }
    if(!$failed) {
        echo "<div id='success'>Your password has been updated</div>";
    }
    
    
}
/* @var $this ApplicationBase */
$hidden="";
$userId = $this->getUserData()->id;
if($this->getConfiguration()->appName == "Users") {
    $hidden="none";
}

?>
<b class='form_text registration_heading'><?php echo $this->__w("Change password"); ?></b>
<table class="edit_password_table" >
    <input type="hidden" value="<?php echo $userId; ?>" id="user_id">
    <tr style="display:<?php echo $hidden; ?>">
        <td class='form_text' width="50%"><?php echo $this->__w("Old password"); ?></td>
        <td><input type="txt" class="form_input" id="old_password"></td>
    </tr>
    <tr>
        <td class='form_text col1'><?php echo $this->__w("New password"); ?></td>
        <td><input type="password" class="form_input" id="new_password"></td>
    </tr>
    <tr>
        <td class='form_text col1'><?php echo $this->__w("Repeat password"); ?></td>
        <td><input type="password"  class="form_input" id="repeat_new_password"></td>
    </tr>
    <tr>
        <td></td>
        <td><span class="button"><div class="rightglare"></div><div class="filler"></div><ins id="set_new_password"><?php echo $this->__w("Set new password"); ?></ins></span></td>
    </tr>
</table>