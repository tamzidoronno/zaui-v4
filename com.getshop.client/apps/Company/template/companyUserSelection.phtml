<?
/* @var $this \ns_a6d68820_a8e3_4eac_b2b6_b05043c28d78\Company */

if (!$this->selectedUser && $_POST['value']) {
   $this->selectedUser = $this->getApi()->getUserManager()->getUserById($_POST['value']);
}

?>

<div class="gss_overrideapp" gss_use_app_id="a6d68820-a8e3-4eac-b2b6-b05043c28d78">      
    <input type='hidden' gs_model='companymodel' gs_model_attr='userid' value='<?php echo $this->selectedUser->id; ?>'>
      
    <div class="textfield gss_setting">
        <span class="title">Should user only be visible for the main company ?</span>
        <div class="gss_onoff" gs_model="companysearch" gs_model_attr="visibleOnlyInMainCompany" mainCompanyVisibleToggle="true" userid="<? echo $this->selectedUser->id; ?>" >
            <?
            $faclass = $this->selectedUser->visibleOnlyInMainCompany ? "fa-toggle-on" : "fa-toggle-off";;
            ?>
            Off<i class="fa <? echo $faclass; ?> "></i>On
        </div>
        <div class="description"></div>
    </div>
    <div class="textfield gss_setting">
        <span class="title">Is this user the company owner?</span>
        <div class="gss_onoff" gs_model="companysearch" gs_model_attr="primaryCompanyUser" mainCompanyUserToggle="true" userid="<? echo $this->selectedUser->id; ?>" >
            <?
            $faclass = $this->selectedUser->isCompanyMainContact ? "fa-toggle-on" : "fa-toggle-off";
            ?>
            Off<i class="fa <? echo $faclass; ?> "></i>On
        </div>
        <div class="description"></div>
    </div>

    <div class="gss_view_of_companies_user_has">
        <?
        $this->includefile("companies");
        ?>
    </div>
    
    <div style='position: relative; padding-top: 57px;'>
        <input style='right: 30px' gs_model='companysearch' gs_model_attr='value' type="textfield" placeholder="<? echo $this->getCompanySearchText(); ?>" class='gss_search_user_company' /> 
        <input type='hidden' gs_model="companysearch" gs_model_attr="userid" value="<? echo $this->selectedUser->id; ?>" />
        <div id='gss_startSearchForCompany' style='position: absolute; padding: 5px; top: 11px; right: 0px; border: solid 1px #DDD; border-radius: 5px;' gss_method='searchForCompanies' gss_model='companysearch' gss_fragment='searchforuser' gss_view='gss_company_user_search_result'><i class='fa fa-search'></i></div>
            
        <div class='gss_company_user_search_result'></div>
    </div>
</div>