<?
/* @var $this ns_bd751f7e_5062_4d0d_a212_b1fc6ead654f\EventUserList */
$event = $this->getEvent();
$users = $this->getApi()->getEventBookingManager()->getUsersForEvent($this->getBookingEngineName(), $event->id);
$waitingListUsers = $this->getApi()->getEventBookingManager()->getUsersForEventWaitinglist($this->getBookingEngineName(), $event->id);
if (!$waitingListUsers) {
    $waitingListUsers = [];
}
$groups = $this->getApi()->getUserManager()->getAllGroups();
$isAdministrator = ns_df435931_9364_4b6a_b4b2_951c90cc0d70\Login::isAdministrator();

if (!count($users)) {
    echo "<div style='padding: 20px;'>".$this->__w("No users added yet")."</div>";
    return;
}

if (ns_df435931_9364_4b6a_b4b2_951c90cc0d70\Login::isAdministrator()) {
?>
    <div class='reports'>
        <center>Reports</center>
        <?
        foreach ($groups as $group) {
            $groupId = $group->id;
            $groupName = $group->groupName;
            $eventId = $event->id;
            echo "<div class='shop_button' gs_downloadExcelReport='downloadReport' gs_fileName='users' eventId='$eventId' groupId='$groupId'> $groupName </div>&nbsp;";
        }
        
        echo "<div class='shop_button' gs_downloadExcelReport='downloadReport' gs_fileName='users' eventId='$eventId' groupId='all'> All </div>&nbsp;";
        ?>
    </div>
<?
}

foreach ($users as $user) {
    $this->setCurrentUser($user);
    $this->setViewingWaitinglist(false);
    $this->includefile("userinforow");
}

if (count($waitingListUsers)) {
    echo "<div class='waitinglistusers'>";
        echo "<center>".$this->__f("Waitinglist")."</center>";
        foreach ($waitingListUsers as $user) {
            $this->setCurrentUser($user);
            $this->setViewingWaitinglist(true);
            $this->includefile("userinforow");
        }    
    echo "</div>";
}

?>

<br/>
<div style='padding-left: 20px;'>
    <div class='shop_button' gs_show_modal="send_reminder" eventid="<? echo $event->id; ?>">Send reminders</div>
    <div class='shop_button'>Download PDFs</div>
</div>