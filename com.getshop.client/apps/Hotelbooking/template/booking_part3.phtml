<?
/* @var $this ns_d16b27d9_579f_4d44_b90b_4223de0eb6f2\Hotelbooking */
$continueCartButtonText = $this->__w("Continue to payment");
$roomTaxPrice = $this->__w("{percentage}% taxes on room");
$cleaningTaxPrice = $this->__w("{percentage}% taxes on cleaning");
$periode = $this->__w("night");
$flexProduct = $this->getFlexProduct();

$loggedOn = ns_df435931_9364_4b6a_b4b2_951c90cc0d70\Login::getUserObject();
$flexPrice = $this->getDayCount() * $flexProduct->price;
?>
<div class="bookingsummary" gstype="form"  method="completeRegularCheckout">
    <div class="section even">
        <div class="section inner">
            <? $this->includefile("pricesummary"); ?>
        </div>
    </div>
    <div class="section odd">
        <div class="section inner">
            <? $this->includefile("visitorinformation"); ?>
        </div>
    </div>

    <div class="booking_contact_data section even">
        <div class="section inner">
            <?
            if(!ns_df435931_9364_4b6a_b4b2_951c90cc0d70\Login::getUserObject() || ns_df435931_9364_4b6a_b4b2_951c90cc0d70\Login::isAdministrator()) {
                $this->includefile("bookingadditionalinfo");
            }

            if ($this->hasErrors()) {
                echo "<div>";
                echo $this->__w("All fields are required, please fill in the fields in red.");
                foreach ($this->errors as $error) {
                    echo "<div>" . $error . "</div>";
                }
                echo "</div>";
            }


            if($this->getPost("customer_type") || $loggedOn) {
                if ($this->checkFailedReservation()) {
                    echo $this->__w("Failed to reserve room... please contact us.");
                } else {
                    
                if (!$this->isPartnershipBooking()) {
                    ?>
            
                    <div>
                        <label style='padding: 5px;'>
                            <input type='checkbox' class='checkNeedFlex' gsname='userData][needFlex]' <?
                            if ($this->getNeedFlexPrice()) {
                                echo "CHECKED";
                            }
                            ?>>
                            <? 
                                $text = $this->__w("I want the ability to cancel my booking ({price} kr in addition per night)");
                                $text = str_replace("{price}", $flexPrice, $text);
                                echo $text;
                            ?>
                        </label>
                    </div>
                <? } ?>
                <div>
                    <label style='padding: 5px;'>
                        <input type='checkbox' class='checklicenagreement' gsname='userData][checklicenagreement]' <?
                        if ($this->getPost("checklicenagreement") == "true") {
                            echo "CHECKED";
                        }
                        ?>> <? echo $this->__w("I accept the <a href='/scripts/whcontract.php' class='gs_ignorenavigate' target='_new'>terms and conditions</a> for room rental at Wilhelmsen House"); ?>
                               <?
                               if ($this->validateInput("checklicenagreement")) {
                                   echo "<div style='color:red; padding-left: 10px'>* Du må godta avtalevilkårene først.</div>";
                               }
                               ?>
                    </label>
                </div>
                    <div style="text-align:right;">
                        <?
                        echo '<div class="continue_to_cart_button common_input" gstype="submit">' . $continueCartButtonText . '</div>';
                        ?>
                    </div>
            <? } ?>
        <? } ?>
        </div>
    </div>
</div>
<div style='clear:both;'></div>
