<?php
namespace ns_15e67fa1_c862_4bc3_9b17_dfd818f30712;

$type = "boder";
if(isset($_POST['data']['type'])) {
    $type = $_POST['data']['type'];
}
$periode = "daily";
if(isset($_POST['data']['interval'])) {
    $periode = $_POST['data']['interval'];
}
$startDate = $this->getStartDate();
$endDate = $this->getEndDate();

$types = array();
$types['boder'] = "Boder";
$types['stats'] = "Statistikk";
$types['coverage'] = "Belegg";


$periodes = array();
$periodes['daily'] = "Daglig";
$periodes['monthly'] = "MÃ¥nedlig";

if(isset($_POST['data']['updated'])) { 
    echo "<span class='updatedtext' style='float:right;'>Data har blitt oppdatert.</span>";
    ?>
    <script>
        setTimeout(function() {
            $('.updatedtext').hide();
        }, "2000");
    </script>
    <?
}
?>
<br>
<br>
<br>
<div gstype="form"  method="displaySelection">
    <input type="startDate" class="startdate" gsname='startdate' value='<? echo $startDate; ?>'>
    <input type="endDate" class="enddate" gsname='enddate' value='<? echo $endDate; ?>'>
    <select gsname='interval' style='display:none;'>
        <? foreach($periodes as $index => $per) {
            $selected = "";
            if($index == $periode) {
                $selected = "SELECTED";
            }
            echo "<option value='$index' $selected>$per</option>";
        }
        ?>
    </select>
    <select gsname='type'>
        <? 
        foreach($types as $index => $typeprint) {
            $selected = "";
            if($index == $type) {
                $selected = "SELECTED";
            }
            echo "<option value='$index' $selected>$typeprint</option>";
        }
        ?>
    </select>
    <input type='button' value='Vis'  gstype="submit">
</div>

<script>
    $('.startdate').datepicker({ dateFormat: "dd.mm.yy"});
    $('.enddate').datepicker({ dateFormat: "dd.mm.yy"});
</script>

<?
switch($type) {
    case "stats":
        $this->includefile("bookingstats");
        break;
    case "coverage":
        $this->includefile("bookingcoverage");
        break;
    default:
        $this->includefile("bookingreferences");
}
?>