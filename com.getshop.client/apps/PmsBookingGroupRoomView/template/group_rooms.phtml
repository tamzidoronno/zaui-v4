<?php
/* @var $this ns_3e2bc00a_4d7c_44f4_a1ea_4b1b953d8c01\PmsBookingGroupRoomView */

$booking = $this->getPmsBooking();
$filter = new core_pmsmanager_PmsBookingFilter();
$filter->bookingId = $booking->id;
$filter->includeDeleted = true;
$rooms = $this->getApi()->getPmsManager()->getSimpleRooms($this->getSelectedMultilevelDomainName(), $filter);
$formatter = new ns_961efe75_e13b_4c9a_a0ce_8d3906b4bd73\PmsSearchBookingColumnFormatters(new \ns_961efe75_e13b_4c9a_a0ce_8d3906b4bd73\PmsSearchBooking());
?>

<div class='manipulateroomoptions'>
    <span class='groupmaninpualtionbtn shop_button disabled' type='delete'><i class='fa fa-trash-o'></i> Delete selected rooms</span>
    <span class='groupmaninpualtionbtn shop_button disabled' type='split'><i class='fa fa-users'></i> Split group</span>
    <span class='groupmaninpualtionbtn shop_button disabled' type='updateGuestCount'><i class='fa fa-plus-square-o'></i> Update guest count</span>
    <span class='groupmaninpualtionbtn shop_button disabled updatePricePanelbtn' type='updatepricepanelbtn' avoidaction='true'><i class='fa fa-money'></i> Update prices</span>
    <span class='groupmaninpualtionbtn shop_button disabled addAddonsPanelbtn' type='addAddon' avoidaction='true'><i class='fa fa-plus-square-o'></i> Add/remove addons</span>
    <span class='groupmaninpualtionbtn shop_button disabled moveCategoryPanelbtn' type='moveToCategory' avoidaction='true'><i class='fa fa-forward'></i> Move category</span>
    
    <span class="shop_button addfromdifferentroom" style="float:right; margin-left: 5px; border-radius: 3px;"><i class='fa fa-arrow-circle-down'></i> Import room</span>
    <span class='shop_button doaddroomtogroup' style="float:right; border-radius: 3px;"><i class='fa fa-plus-circle'></i> Add room</span>
    
    <i class='fa fa-caret-down'></i>
</div>


<table style='width:100%;' class='roomtable'>
    <?php
    echo "<tr>";
    echo "<th width='10'><input type='checkbox' class='toggleallrooms'></th>";
    echo "<th>Check in</th>";
    echo "<th>Check out</th>";
    echo "<th>Guests</th>";
    echo "<th>Guest information</th>";
    echo "<th>Addons</th>";
    echo "<th>Room</th>";
    echo "<th>Price</th>";
    echo "<th>Total</th>";
    echo "</tr>";
    
    foreach($rooms as $room) {
        echo "<tr class='roomrows ".$room->progressState."'>";
        echo "<td width='10' align='center'><input type='checkbox' class='roomcheckbox' roomid='".$room->pmsRoomId."'></td>";
        echo "<td align='center'>" . $formatter->formatStartPeriode($room) . "</td>";
        echo "<td align='center'>" . $formatter->formatEndPeriode($room) . "</td>";
        echo "<td align='center'>" . $formatter->formatGuests($room) . "</td>";
        echo "<td>" . $formatter->formatVistior($room) . "</td>";
        echo "<td align='center'>" . $formatter->formatAddons($room) . "</td>";
        echo "<td>" . $formatter->formatRoom($room) . "</td>";
        echo "<td align='center'>" . $formatter->formatPrice($room) . "</td>";
        echo "<td align='center'>" . $formatter->formatTotalPrice($room) . "</td>";
        echo "</tr>";
    }
    ?>
</table>


<style>
    .roomrows.deleted td { color:red !important; }
    .manipulateroomoptions { margin-bottom: 10px; position: relative; border-bottom: solid 1px #bbb; padding-bottom: 10px;  }
    .unsettledamountwarning { color:red; font-weight: bold; }
    .roomcheckbox,.toggleallrooms { height: 30px; width: 30px; }
    .roomrows td { position: relative; }
    .quickfunctions { display:none; }
    .flag { display:none !important; }
    .addedtocheckout { display:none; }
    .fa-arrows-h { display:none; }
    .roomrows { border-bottom: solid 1px #000; }
    .shop_button.disabled {
        background-color: #efefef;
        color: #aaa !important;
        cursor: inherit;
    }
    
    .manipulateroomoptions .fa-caret-down {
        position: absolute;
        bottom: -14px;
        font-size: 20px;
        left: 23px;
        color: #bbb;
    }
    .numberofguests {
        border-radius: 1000px;
        height: 40px;
        width: 40px;
        border: solid 2px #82cdf3;
        text-align: center;
        line-height: 40px;
        font-size: 20px;
        font-weight: bold;
        position: relative;
        display: inline-block;
        vertical-align: top;
    }
    .manipulateroomoptions .shop_button { margin: 3px; }
    .roomtable {
        font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
        border-collapse: collapse;
        width: 100%;
      }

      .roomtable td, .roomtable th {
        border: 1px solid #ddd;
        padding: 8px;
      }

      .roomtable tr:nth-child(even){background-color: #f2f2f2;}

      .roomtable tr:hover {background-color: #ddd;}

      .roomtable th {
        padding-top: 12px;
        padding-bottom: 12px;
        text-align: left;
        background-color: #4CAF50;
        color: white;
      }
    
</style>