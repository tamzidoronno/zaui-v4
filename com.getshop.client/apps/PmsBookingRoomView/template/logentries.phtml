<?php
$logs = $this->getLogEntries();
$printed = false;
foreach($logs as $log) {
    $type = $log->logType;
    if(stristr($type, "sms") || stristr($type, "email")) {
        $typeText = str_replace("_email", "", $log->logType);
        $typeText = str_replace("_sms", "", $typeText);
        if(stristr($type, "email")) {
            $typeText .= " email";
        } else {
            $typeText .= " sms";
        }
        $printed = true;
        $text = $log->logText;
        $text = preg_replace('/^(?:<br\s*\/?>\s*)+/', '', $text);
        echo "<div class='messagelogentry'>";
        echo "<div class='messagelogtext'>" . $text . "</div>";
        echo "<div class='messagelogfooter'>";
        echo "<span style='float:left;'><i class='fa fa-expand expandmessage' style='cursor:pointer;'></i> " . date("d.m.Y H:i:s", strtotime($log->rowCreatedDate)) . "</span>";
        echo $typeText . "<div style='clear:both;'></div></div>";
        echo "</div>";
    }
}
if(!$printed) {
    echo "No messages sent yet";
}
?>

<style>
.messagelogentry {
    border: solid 1px #ddd;
    padding: 10px;
    margin: 10px;
}
.messagelogtext {         
    max-height: 100px;
    overflow: auto;
}
.messagelogfooter { text-align: right; color:#aaa; border-top: solid 1px;  padding-top: 5px; margin-top: 10px;}
</style>

