<?php
/* @var $this ns_27e174dc_b08c_4bf7_8179_9ea8379c91da\PmsEventCalendar */
//print_r($this->getEventList());
foreach($this->getEventList() as $eventEntry) {
    
    $shortId = explode("-", $eventEntry->id);
    $edit = "";
    if($this->isEditorMode()) {
        $edit = "<a><i class='fa fa-trash-o'  gstype='clicksubmit' method='removeEntry' gsname='id' gsvalue='".$eventEntry->id."' ></i></a> ";
        $edit .= "<a href='?page=".$this->getPage()->javapage->id."&eventid=".$eventEntry->id."'><i class='fa fa-edit'></i></a> ";
    }
    echo "<h2>" . $edit . "<a href='?page=".$this->getPage()->javapage->id."&readevent=".$shortId[0]."'>" . $eventEntry->title  . "</a></h2>";
    echo nl2br($eventEntry->shortdesc) . "<br>";
    
    $ranges = array();
    foreach($eventEntry->dateRanges as $range) {
        $ranges[date("d.m.Y", strtotime($range->start))] = "true";
    }
    
    $dates = array();
    foreach($ranges as $idx => $range) {
        $dates[] = $idx;
    }

    echo "<div style='font-size:12px;color:#828282; margin-top: 20px;'>";
    echo join(", ", $dates);
    echo "</div>";
    echo "<a href='?page=".$this->getPage()->javapage->id."&readevent=".$shortId[0]."' style='float:right;'>Les mer</a>";
    echo "<div style='clear:both;border-bottom: solid 1px #bbb;padding-top: 10px;'></div>";
}
?>