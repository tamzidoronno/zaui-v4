<? 
/* @var $this ns_7e828cd0_8b44_4125_ae4f_f61983b01e0a\PmsManagement */
$config = $this->getApi()->getPmsManager()->getConfiguration($this->getSelectedName());
$booking = $this->getSelectedBooking();
$types = $this->getTypes();
$bookingItems = $this->getItems();

$items = array();
$items[1] = "BREAKFAST";
$items[2] = "PARKING";
$items[3] = "LATECHECKOUT";
$items[4] = "EARLYCHECKIN";
$items[5] = "EXTRABED";
$items[6] = "CANCELATION FEE";
?>

<h2>Addons</h2>
<?php
echo "<select id='roomsForAddons'>";
echo "<option value=''>All rooms</option>";
foreach($booking->rooms as $room) {
    $roomName = $types[$room->bookingItemTypeId]->name;
    if($room->bookingItemId) {
        $roomName .= " (" . $bookingItems[$room->bookingItemId]->bookingItemName . ") " . $room->guests[0]->name;
    }
    echo "<option value='".$room->pmsBookingRoomId."'>$roomName</option>";
}
echo "</select> ";

echo "<select id='addontypeselection'>";
foreach($config->addonConfiguration as $addonConfig) {
    /* @var $addonConfig core_pmsmanager_PmsBookingAddonItem */
    if(!$addonConfig->isActive) {
        continue;
    }
    echo "<option value='" . $addonConfig->addonType . "'>" . $items[$addonConfig->addonType] . "</option>";
}
echo "</select> ";
echo "<span class='pmsbutton addAddonsButton'>Add addon</span>";


foreach($booking->rooms as $room) {
    $roomName = $types[$room->bookingItemTypeId]->name;
    if($room->bookingItemId) {
        $roomName .= " (" . $bookingItems[$room->bookingItemId]->bookingItemName . ") " . $room->guests[0]->name;
    }
    echo "<h2>$roomName</h2>";
    if(sizeof($room->addons) == 0) {
        echo "No addons added to this room.";
    } else {
        foreach($room->addons as $addon) {
            
        }
    }
}
?>