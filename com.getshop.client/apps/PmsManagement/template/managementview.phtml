<?php
/* @var $this ns_7e828cd0_8b44_4125_ae4f_f61983b01e0a\PmsManagement */

$filter = $this->getSelectedFilter();
$config = $this->getApi()->getPmsManager()->getConfiguration($this->getSelectedName());

$searchtypes = array();
$searchtypes['registered'] = "Registered";
$searchtypes['active'] = "Active";
$searchtypes['uncofirmed'] = "Unconfirmed";
$searchtypes['checkin'] = "Checkin in";
$searchtypes['checkout'] = "Checkin out";
$searchtypes['deleted'] = "Deleted";
$searchtypes['stats'] = "Coverage";
?>



<div class='booking_options' gstype='form' method='setFilter' style='position:relative;'>
    <span style="float:left;">
        <input type='text' gsname='start' class="start pmsinput" style="width: 100px;" value="<? echo date("d.m.Y", strtotime($filter->startDate)); ?>">
        <input type='text' gsname='end' class="end pmsinput" style="width: 100px;" value="<? echo date("d.m.Y", strtotime($filter->endDate)); ?>">

        <select class="pmsinput filterType" gsname='filterType'>
            <?php
            foreach($searchtypes as $idx => $type) {
                $selected = "";
                if($filter->filterType == $idx) {
                    $selected = "SELECTED";
                }
                echo "<option value='$idx' $selected>$type</option>";
            }
            ?>
        </select>
        <span gstype="submit" class="pmsbutton setFilter">Show</span>
        <span gstype="clicksubmit" method='emptyfilter' gsname="id" gsvalue="somevalue" style=' padding-left: 10px; top: 15px;display:inline-block;position:absolute;cursor:pointer;'>Empty filter</span>
    </span>
    <input type="txt" gsname='searchWord' placeholder="Search" gstype="submitenter" class="pmsinput searchword" value="<? echo @$filter->searchWord; ?>">
    <span gstype="submit" class="pmsbutton addGroupOptions">Search</span>
</div>
<br><br>

<?php
if($filter->filterType == "stats") {
    $this->includefile("statistics");
} else {
    $this->includefile("managementviewtable");
    if($config->includeGlobalOrderCreationPanel) {
        $this->includefile("generateinvoicepanel");
    }
}

 ?>

<script>
    $('.start.pmsinput').datepicker({ dateFormat: "dd.mm.yy", changeMonth: true, changeYear: true, showButtonPanel: true });
    $('.end.pmsinput').datepicker({ dateFormat: "dd.mm.yy", changeMonth: true, changeYear: true, showButtonPanel: true });
</script>