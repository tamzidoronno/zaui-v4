<?php

namespace ns_962ce2bb_1684_41e4_8896_54b5d24392bf;

/* @var $this ProductLister */
/* @var $this \ns_962ce2bb_1684_41e4_8896_54b5d24392bf\HelloWorld */
$title = $this->getTitle();
/* @var $products \core_productmanager_data_Product[] */
$products = $this->getProducts();
$view = $this->getView();
if ($view != "rowview") {
    $view = "listview";
}
 
if (!$products) {
    $products = array();
}
$count = $this->getColumnCount();
$countClass = "c" . $count;
if ($count > 1) {
    $countClass = "boxed c" . $count;
    $view = "listview"; 
}
?>

<div class='<? echo $view . " " . $countClass; ?>' column="<? echo $count; ?>">
    <?
    $this->includefile("listfilter");

    if (sizeof($products) == 0 && $this->hasWriteAccess()) {
        echo "<div class='no_product_to_list'>";
        echo '<i class="fa fa-exclamation-triangle"></i> ';
        echo $this->__f("You have not yet added any products this list.") . "<br>";
        echo "<div style='padding-left:22px;'>" . $this->__f("Do so by hovering the mouse and click the gear appearing.") . "</div>";
        echo "</div>";
    }
    ?>
    <span class="sliderleft slidearrow"><i class="fa fa-arrow-circle-left"></i></span>
    <span class="sliderright slidearrow"><i class="fa fa-arrow-circle-right"></i></span>
    <div class='inner_product_container'>
        <?
        foreach ($products as $product) {
            ?>
            <div class='product'>
                <div class="product_inner">
                    <a ajaxlink="<? echo $this->getProductLink($product, false); ?>" href="<? echo $this->getProductLink($product); ?>" id="<?php echo $product->page->id; ?>" scrolltop="true">
                        <input type='hidden' value='<? echo $product->id; ?>' id='ProductId'>
                        <?
                        $img = @$product->imagesAdded[0];
                        if (!$img) {
                            $img = "default";
                        }
                        ?>
                        <? if ($product->freeShipping || $product->promoted) { ?>
                            <div class="free_shipping">
                                <?
                                if ($product->freeShipping) {
                                    echo $this->__w("Free shipping");
                                }
                                if ($product->freeShipping && $product->promoted) {
                                    echo " + ";
                                }
                                if ($product->promoted) {
                                    echo $this->__w("Featured Product");
                                }
                                ?>
                            </div>
                        <? } ?>

                        <div class='name'><?
                            if (!$product->name) {
                                echo $this->__w("Untitled product");
                            } else {
                                echo $product->name;
                            }
                            ?></div>
                        <img src='displayImage.php?id=<? echo $img; ?>'>
                        <span class='description'>
                            <?
                            $description = "";
                            foreach($product->descriptions as $desc) {
                                if($desc) {
                                    $description = $desc;
                                }
                            }
                            if(!$description) {
                                $description = "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.";
                           }
                           echo strip_tags($description, "<br>");
                            ?>
                        </span>
                        <div class="price"><? echo $this->getFactory()->getCurrencyName(); ?><? echo $product->price; ?></div>
                        <div class='row_bottom'></div>
                    </a>
                    <span  type='productlist' class="gs_button small buy_product"><? echo $this->__f("Buy"); ?></span>
                </div>
            </div>
        <? } ?>
        <div class='bottom_container'></div>
    </div>
</div>