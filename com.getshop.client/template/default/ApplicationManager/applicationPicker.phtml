<?
$app = $this->getCurrentApp();
$factory = $this->getFactory();
$appimagename = ApplicationHelper::getApplicationImage($app);

/* @var $factory Factory */
$apps = $factory->getApi()->getPageManager()->getApplicationsByPageAreaAndSettingsId($app->getApplicationSettings()->id, $_POST['data']['area']);
$count = count($apps);
?>
<div class='application'>
    <div class='title'><? echo $app->getName(); ?></div>
    <div class="descriptionholder">
        <div class="description inline">
            <? echo $app->getDescription(); ?>
        </div>
        <div class="image inline">
            <img src="<? echo $appimagename; ?>"/>
        </div>                    
    </div>
    
    <div class="title">
        <? echo $this->__f("Add to your page"); ?>
    </div>
    
    <div class="descriptionholder">
        <div class="description">
            <?
                echo $this->__f("Already created instances of this app").": ".$count;
            ?>    
        </div>    
    </div>
    
    <div style="text-align: right; margin-top: 10px;">
        <div class="button-large" id="importApplicationToArea" appSettingsId="<?echo $app->getApplicationSettings()->id;?>" area="<? echo isset($_POST['data']) && isset($_POST['data']['area']) ? $_POST['data']['area'] : ""; ?>">
            <div class="rightglare"></div>
            <div class="filler" style="background-color: green"></div>
            <ins><? echo $this->__f("Import to area"); ?></ins>
        </div>    
    </div>

</div>